var Schedule;(function(n){var i=function(){function n(n,t,i){this.name=n,this.index=t,this.color=i}return n}(),r,f,u,t,e;n.Employee=i,r=function(){function n(n,t){this.beginTime=n,this.endTime=t,this.work=ko.observableArray([])}return n.pad=function(n,t){for(var i=n+"";i.length<t;)i="0"+i;return i},Object.defineProperty(n.prototype,"dayName",{get:function(){var n=new Array(7);return n[0]="Sunday",n[1]="Monday",n[2]="Tuesday",n[3]="Wednesday",n[4]="Thursday",n[5]="Friday",n[6]="Saturday",n[this.beginTime.getDay()]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shortName",{get:function(){return this.beginTime.getHours()+":"+n.pad(this.beginTime.getMinutes(),2)},enumerable:!0,configurable:!0}),n.prototype.change=function(){},n}(),n.WorkUnit=r,f=function(){function n(){this.WorkUnits=ko.observableArray([])}return Object.defineProperty(n.prototype,"dayName",{get:function(){return this.WorkUnits()[0].dayName},enumerable:!0,configurable:!0}),n.prototype.errorsForEmployee=function(n){var t={invalid:!1,messages:[]},i=this.checkSixHoursLimit(n);return i.result||(t.invalid=!0,t.messages.push(i.message)),t},n.prototype.checkSixHoursLimit=function(n){console.log("checking six hours");var u=!1,i=this.WorkUnits()[0].beginTime,r=i;return(this.WorkUnits().forEach(function(f){if(f.work()[n.index]().type()==t.Pause)i=f.beginTime,r=f.endTime;else{r=f.endTime;var e=r.valueOf()-i.valueOf();e>216e5&&(console.log("too long"),u=!0)}}),u)?{result:!1,message:"work unit longer than six hours"}:{result:!0,message:"ok."}},n}(),n.WorkDay=f,u=function(){function n(n){this.type=ko.observable(n),this.text=ko.computed(function(){return this.stringRep()},this),this.css=ko.computed(function(){return"css"+this.text()},this)}return n.prototype.stringRep=function(){switch(this.type()){case t.Pause:return"Pause";case t.KinderDienst:return"Kinder";case t.Aufbleiber:return"Aufbleiber";case t.MittagsDienst:return"Mittag";case t.Rasten:return"Rasten";case t.Reinigung:return"Reinigung"}return"other"},n.prototype.changeType=function(){var n=this.type();switch(n){case t.Pause:n=t.KinderDienst;break;case t.KinderDienst:n=t.Reinigung;break;case t.Reinigung:n=t.Rasten;break;case t.Rasten:n=t.Aufbleiber;break;case t.Aufbleiber:n=t.MittagsDienst;break;case t.MittagsDienst:n=t.Pause}this.type(n)},n}(),n.WorkCell=u,function(n){n[n.Pause=0]="Pause",n[n.KinderDienst=1]="KinderDienst",n[n.Reinigung=2]="Reinigung",n[n.Rasten=3]="Rasten",n[n.Aufbleiber=4]="Aufbleiber",n[n.MittagsDienst=5]="MittagsDienst"}(n.WorkType||(n.WorkType={})),t=n.WorkType,e=function(){function n(){var n,e,o,s,h;for(this.Days=ko.observableArray([]),this.Employees=ko.observableArray([]),this.Employees.push(new i("Elisabeth",0,"red")),this.Employees.push(new i("Theresa",1,"green")),this.Employees.push(new i("Irene",2,"yellow")),this.Employees.push(new i("Renate",3,"palegreen")),this.Employees.push(new i("Andrea",4,"orange")),n=0;n<5;n++)for(this.Days.push(new f),e=0;e<9;e++)for(o=new r(new Date(2013,06,22+n,07+e,00),new Date(2013,06,22+n,07+e,30)),s=new r(new Date(2013,06,22+n,07+e,30),new Date(2013,06,22+n,07+e+1,00)),this.Days()[n].WorkUnits.push(o),this.Days()[n].WorkUnits.push(s),h=0;h<this.Employees().length;h++)o.work().push(ko.observable(new u(t.Pause))),s.work().push(ko.observable(new u(t.Pause)))}return n.prototype.totalHours=function(n){for(var f=0,r,u,e,i=0;i<this.Days().length;i++)for(r=0;r<this.Days()[i].WorkUnits().length;r++)u=this.Days()[i].WorkUnits()[r],e=u.work()[n.index](),e.type()!=t.Pause&&(f+=u.endTime.getTime()-u.beginTime.getTime());return new Date(f)},n.prototype.relativeHours=function(n){return this.totalHours(n).getHours()/38.5*100+"%"},n}(),n.Week=e})(Schedule||(Schedule={}))